import * as React from "react";
import styled from "styled-components";
import { motion, useViewportScroll } from "framer-motion";
import { Link } from "gatsby";

let Navigation = styled(motion.div)`
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(0deg, rgba(11, 29, 38, 0) 0%, #0b1d26 100%);
  color: var(--white);
  width: 100%;
  height: 130px;
  position: fixed;
  top: 0px;
  padding: 0 40px;
  z-index: 50;
`;

let Menu = styled.div`
  align-items: center;
  display: flex;
`;

let ItemText = styled.span`
  position: relative;

  &:after {
    content: "";
    display: block;
    width: 100%;
    position: absolute;
    bottom: -6px;
    left: 0;
    border-bottom: 3px solid transparent;
    transform: translateY(10px);
    transition: transform ease 0.5s, border-color ease 0.5s;
  }
`;

let Item = styled(Link)`
  font-size: 0.825em;
  font-weight: 400;
  letter-spacing: 0.03em;
  color: rgba(255, 255, 255, 1);
  margin: 5px;
  padding: 5px 10px;
  border-radius: 999px;

  &:hover ${ItemText}:after {
    transform: translateY(0);
    border-bottom-color: var(--green);
  }
`;

export default function Nav() {
  const { scrollY } = useViewportScroll();
  const [hidden, setHidden] = React.useState(false);

  function update() {
    if (scrollY?.current < scrollY?.prev) {
      setHidden(false);
    } else if (scrollY?.current > 100 && scrollY?.current > scrollY?.prev) {
      setHidden(true);
    }
  }

  React.useEffect(() => {
    return scrollY.onChange(() => update());
  });

  const variants = {
    visible: { opacity: 1, y: 0 },
    hidden: { opacity: 0, y: -25 },
  };

  return (
    <Navigation
      variants={variants}
      animate={hidden ? "hidden" : "visible"}
      transition={{ ease: [0.1, 0.25, 0.3, 1], duration: 0.6 }}
    >
      <Menu>
        <Item to="/venue">
          <ItemText>The Venue</ItemText>
        </Item>
        <Link to="/">
          <svg
            width="227"
            height="130"
            viewBox="0 0 227 130"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_427_1447)">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M92.4437 32.1746C90.5745 33.9159 91.2574 36.9432 93.6555 37.5449C95.231 37.9404 95.6485 37.3376 95.5793 34.7676C95.5453 33.5015 95.3328 32.243 95.1076 31.9714C94.524 31.2682 93.3175 31.3603 92.4437 32.1746ZM123.514 39.5936C118.535 40.7975 114.325 44.1714 112.158 48.6945C111.49 50.0888 110.943 51.4134 110.943 51.6379C110.943 51.8621 109.666 53.1646 108.106 54.5322C106.546 55.8997 103.645 58.5298 101.659 60.377C95.197 66.3883 94.9288 66.5565 95.2798 64.3747C95.5371 62.7771 95.7585 58.6945 96.0099 50.9182C96.2344 43.9782 96.0332 42.142 95.0481 42.1327C94.807 42.1303 92.9076 42.9823 90.8272 44.026C86.3698 46.2617 82.4681 47.4312 77.5516 48.0047C71.9547 48.6577 63.589 48.1295 55.5819 46.6176C52.4914 46.0341 45.2707 44.5851 42.7145 44.0352C37.949 43.0105 29.8542 41.8077 25.2356 41.4381C16.7884 40.7624 9.06535 42.001 2.71398 45.0503C-0.0636977 46.3838 -0.466698 46.6881 -0.466698 47.4518C-0.466698 48.6209 -0.0506314 48.5693 3.35424 46.979C9.45185 44.1312 13.1108 43.3922 21.0243 43.4111C28.5335 43.4294 32.3905 43.9857 50.2095 47.622C59.7099 49.5607 64.7825 50.1518 71.9151 50.1514C77.7315 50.1511 78.8741 50.0527 82.3275 49.255C84.4607 48.7622 87.5125 47.7981 89.1087 47.1128C90.7048 46.4271 92.1882 45.976 92.4052 46.1101C92.6803 46.2803 92.736 47.252 92.5881 49.3172C92.4716 50.9471 92.2948 55.6074 92.1948 59.6735C91.9351 70.2357 92.0892 69.579 89.1454 72.6895C74.2977 88.378 66.0562 101.758 63.4927 114.336C61.5626 123.808 64.1852 129.869 70.2144 129.869C76.476 129.869 82.8615 122.277 86.8605 110.076C90.2654 99.6884 93.0162 87.0703 94.4701 75.1721L94.9085 71.5868L98.6658 67.9512C100.732 65.9516 102.754 63.9965 103.158 63.6065C106.537 60.3485 109.923 57.5956 110.052 58.0017C110.134 58.2592 110.387 59.321 110.614 60.3612C111.814 65.8674 115.989 69.1574 122.638 69.8382C124.969 70.0769 129.776 69.5181 130.353 68.9415C130.533 68.7613 130.955 68.6138 131.29 68.6138C132.24 68.6138 135.602 66.9426 138.623 64.9682C141.53 63.0684 145.405 59.8918 149.111 56.3697C153.185 52.4976 155.065 51.2329 157.269 50.8804C158.762 50.6418 159.311 50.7401 167.335 52.6825C176.101 54.8041 184.78 56.5846 191.749 57.6912C198.439 58.753 209.421 58.7637 214.106 57.7128C217.824 56.879 221.887 55.3553 224.979 53.6357C227.088 52.4628 227.541 51.9715 227.259 51.163C227.014 50.4609 226.239 50.6583 223.626 52.0894C214.885 56.8745 203.935 57.784 188.139 55.0359C181.841 53.94 169.578 51.2882 166.82 50.4251C163.335 49.3348 159.307 48.5803 157.02 48.5896C154.673 48.5989 154.255 48.712 152.378 49.8468C151.243 50.5328 149.309 51.9367 148.079 52.9666C138.638 60.8766 136.028 62.8033 132.606 64.3885C129.381 65.8825 127.329 66.344 124.069 66.3082C118.938 66.2522 116.002 64.8399 114.606 61.7545C113.584 59.4981 113.618 54.4452 114.673 51.6417C116.696 46.2665 121.235 42.8245 126.3 42.8245C130.239 42.8245 131.873 44.5043 131.425 48.0938C131.16 50.2119 131.599 50.8543 133.187 50.672C134.465 50.5255 135.158 48.5917 134.865 45.9911C134.476 42.5415 132.139 40.2363 128.205 39.42C126.036 38.9702 126.101 38.9678 123.514 39.5936ZM90.6553 77.2494C90.6553 78.0726 89.0798 87.573 88.5519 89.9329C88.3618 90.7839 88.0668 92.0992 87.8969 92.8557C84.2159 109.25 81.0112 117.488 76.345 122.551C68.2603 131.325 63.5849 124.267 68.1805 110.225C70.4586 103.265 74.2355 96.4589 80.2368 88.499C83.4983 84.1733 89.9765 76.5421 90.3974 76.53C90.5394 76.5259 90.6553 76.8495 90.6553 77.2494Z"
                fill="#50B04E"
              />
            </g>
            <defs>
              <clipPath id="clip0_427_1447">
                <rect width="227" height="130" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </Link>
        <Item to="/location">
          <ItemText>Location</ItemText>
        </Item>
      </Menu>
    </Navigation>
  );
}
